---
phase: 06-module1-content
plan: 04
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/lib/content/module1/difference-in-differences.ts
  - src/lib/content/module1/field-experiments.ts
  - src/lib/content/module1/python-demo-did.ts
  - src/lib/components/animation/presets/index.ts
  - src/lib/content/module1/index.ts
  - src/lib/data/modules.ts
autonomous: false
---

<objective>
Create Lectures 6-8: Difference-in-Differences, Field Experiments, and Python Demo.

Purpose: Complete Module 1 with advanced methods and practical implementation.

Output: Three lectures covering DID methodology, real-world field experiments (Swedish grocery case), and hands-on Python code demonstration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md

Prior work:
@.planning/phases/06-module1-content/06-01-SUMMARY.md

Source files:
@src/lib/components/animation/index.ts
@src/lib/components/animation/presets/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DID explanation preset and Lecture 6</name>
  <files>src/lib/components/animation/presets/index.ts, src/lib/content/module1/difference-in-differences.ts</files>
  <action>
Add preset: createDIDExplanation()

DID explanation steps:
1. Two groups over time: treatment and control
2. Pre-period: both groups have outcomes
3. Treatment occurs (only treatment group affected)
4. Post-period: observe outcomes for both
5. Calculate: (Post_T - Pre_T) - (Post_C - Pre_C)
6. The parallel trends assumption visualized

Use a 2x2 grid layout showing before/after for treated/control.
Show the counterfactual line (what would have happened without treatment).

Then create Lecture 6 content:
1. **The DID Idea** - Text introduction
2. **How DID Works** - Use createDIDExplanation() preset (animated)
3. **The Parallel Trends Assumption** - Critical assumption explained with diagram
4. **Classic Example: Card & Krueger Minimum Wage** - NJ vs PA fast food
5. **Testing Parallel Trends** - Pre-treatment trends diagram
6. **Marketing Applications** - Policy changes, market entry timing
  </action>
  <verify>TypeScript compiles, DID animation works</verify>
  <done>DID preset and Lecture 6 content complete</done>
</task>

<task type="auto">
  <name>Task 2: Create Lecture 7 - Field Experiments</name>
  <files>src/lib/content/module1/field-experiments.ts</files>
  <action>
Create content for "Field Experiments" lecture.

Sections:
1. **Lab vs Field** - Text comparing controlled experiments to real-world
2. **Designing Field Experiments** - Key considerations diagram
3. **The Swedish Grocery Store Study** - Detailed case study with diagrams showing:
   - Store layout (treatment vs control stores)
   - Price tag placement experiment
   - Results visualization
4. **Challenges in the Field** - Compliance, spillovers, Hawthorne effects
5. **A/B Testing at Scale** - How tech companies run thousands of experiments
6. **Ethics in Field Experiments** - Brief discussion of ethical considerations

Use static diagrams - this lecture is more about case studies than methodology.
Create a store layout diagram showing the treatment manipulation.
  </action>
  <verify>TypeScript compiles, export is valid</verify>
  <done>Lecture 7 content complete with Swedish grocery case study</done>
</task>

<task type="auto">
  <name>Task 3: Create Lecture 8 - Python Demo</name>
  <files>src/lib/content/module1/python-demo-did.ts</files>
  <action>
Create content for "Python Demo: DID Implementation" lecture.

Sections:
1. **Setup** - Required libraries (pandas, statsmodels, matplotlib)
2. **Data Structure** - Show expected data format with example
3. **Basic DID Calculation** - Step-by-step code walkthrough
4. **Regression Approach** - OLS with interaction terms
5. **Visualization** - Plotting parallel trends
6. **Complete Code Example** - Full reproducible example

This lecture is code-heavy. Use code blocks styled appropriately.
No animations needed - static code snippets with syntax highlighting.
Include expected output for each code block.

Note: This is a reference lecture - students copy code to their own environment.
  </action>
  <verify>TypeScript compiles, content structure is valid</verify>
  <done>Lecture 8 content complete with Python code examples</done>
</task>

<task type="auto">
  <name>Task 4: Update all exports and module data</name>
  <files>src/lib/content/module1/index.ts, src/lib/data/modules.ts, src/lib/components/animation/presets/index.ts</files>
  <action>
1. Add exports for lectures 6, 7, 8 to content index
2. Update all remaining lectures (1-6, 1-7, 1-8) status to 'ready'
3. Export new DID preset from presets index

All 8 lectures should now be marked as ready.
  </action>
  <verify>All 8 lectures show as ready, all exports work</verify>
  <done>Module 1 complete with all 8 lectures ready</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Module 1 with all 8 lectures ready</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:5174/module/causal-analysis
    3. Verify all 8 lectures show "Ready" badge
    4. Click through each lecture and verify content loads:
       - L1: Introduction (confounding animation)
       - L2: Key Thinkers (timeline)
       - L3: RCTs (RCT animation)
       - L4: Matching (matching animation)
       - L5: IV (IV animation)
       - L6: DID (DID animation)
       - L7: Field Experiments (Swedish case study)
       - L8: Python Demo (code blocks)
    5. Test navigation: can navigate through all 8 lectures in order
    6. Verify build: npm run build succeeds
  </how-to-verify>
  <resume-signal>Type "approved" if Module 1 is complete, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] All 8 lectures accessible and loading
- [ ] DID animation plays correctly
- [ ] Python code displays with proper formatting
- [ ] Full lecture navigation 1→2→3→4→5→6→7→8 works
- [ ] Module page shows 8/8 lectures ready
</verification>

<success_criteria>
- Lectures 6, 7, 8 content complete
- DID animation preset created
- All 8 Module 1 lectures marked as ready
- User approved complete module experience
</success_criteria>

<output>
After completion, create `.planning/phases/06-module1-content/06-04-SUMMARY.md`
</output>
