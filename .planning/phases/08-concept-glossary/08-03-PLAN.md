# Plan 08-03: Concept Cards & Visual Definitions

## Objective

Create the concept card component with visual definitions, related concepts, and optional diagrams.

## Dependencies

- Plan 08-01 (glossary data)
- Plan 08-02 (glossary page structure)

## Implementation Steps

### Step 1: Create Concept Card Component

Create `src/lib/components/glossary/ConceptCard.svelte`:
- Props: concept (GlossaryConcept), expanded (boolean)
- Collapsed view: term, short definition, category badge
- Expanded view: full definition, diagram, related concepts
- Click to expand/collapse
- Smooth expand animation

### Step 2: Create Related Concepts Component

Create `src/lib/components/glossary/RelatedConcepts.svelte`:
- Props: conceptIds, allConcepts
- Horizontal list of related concept chips
- Click to navigate/scroll to that concept
- Show term name as chip label

### Step 3: Integrate Diagrams

- For concepts with diagramData, render CausalDiagram
- Scale appropriately for card size (max 300px width)
- Only show in expanded view
- Add some concepts with diagrams:
  - Confounding (X → Y with C → both)
  - Collider (X → C ← Y)
  - IV structure (Z → X → Y with U → X,Y)
  - DID setup (treatment/control over time)

### Step 4: Create Concept Detail Modal (Optional)

If cards feel cramped, create `src/lib/components/glossary/ConceptModal.svelte`:
- Full-screen modal with concept details
- Larger diagram space
- More room for extended definition
- Close button, click outside to close

### Step 5: Add Lecture Source Links

- Show "From: Lecture X - Title" at bottom of card
- Make it a link to the lecture page
- Style subtly (small text, muted color)

### Step 6: Update Component Exports

Update `src/lib/components/glossary/index.ts`

## Verification

- [ ] Concept cards render correctly
- [ ] Expand/collapse animation smooth
- [ ] Diagrams display in expanded view
- [ ] Related concepts are clickable
- [ ] Lecture links work
- [ ] Mobile layout works
- [ ] Build passes

## Estimated Scope

- 3-4 new files
- ~350-400 lines

## Checkpoint

After this plan, Phase 8 is complete. User should test:
1. Search functionality
2. Category filtering
3. A-Z navigation
4. Concept card expansion
5. Diagram rendering
6. Related concept navigation
