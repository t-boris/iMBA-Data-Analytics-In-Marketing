# Plan 09-02: Confounding Simulator

## Objective

Create an interactive visualization showing how confounding bias affects treatment effect estimates. Users adjust confounding strength and see the bias emerge in real-time.

## Dependencies

- Plan 09-01 (simulation utilities, controls)

## Implementation Steps

### Step 1: Create Confounding Scenario Page

Create `src/routes/explore/confounding/+page.svelte`:
- Title: "Understanding Confounding"
- Brief explanation of what confounding is
- Interactive visualization area
- Controls panel on side/below

### Step 2: Create Confounding Visualization

Create `src/lib/components/explore/ConfoundingViz.svelte`:
- Animated DAG showing X → Y with C → both
- Scatter plot showing treatment vs outcome
- Color-coded by treatment status
- As confounding increases, show how groups separate on confounder
- GSAP animations for smooth transitions

### Step 3: Create Data Generator for Confounding

In simulation.ts, add:
- `generateConfoundedData(n, confoundingStrength, treatmentEffect)`
- Confounder affects both treatment probability and outcome
- Strength 0 = no confounding, 1 = strong confounding

### Step 4: Wire Up Interactivity

- Slider for confounding strength (0-100%)
- Slider for sample size (50, 100, 200, 500)
- Slider for true treatment effect (-2 to 2)
- Results panel showing:
  - True ATE
  - Naive estimate (biased)
  - Bias amount
  - What controlling for C would give

### Step 5: Add Explanation Callouts

- Dynamic text explaining what's happening
- "As confounding increases, the naive estimate becomes biased because..."
- Highlight the backdoor path in the DAG when confounding > 0

## Verification

- [ ] /explore/confounding route works
- [ ] DAG animates when confounding changes
- [ ] Scatter plot updates smoothly
- [ ] Bias calculation is correct
- [ ] Explanations are clear
- [ ] Build passes

## Estimated Scope

- 2 new files
- ~350 lines
